'use strict';function ajaxMonkeyPatchForPreload(a,b){function c(k){return'string'==typeof k||k instanceof String}function d(k){var l=a.atob(k),n=l.replace(/(.)/g,function(o,q){var r=q.charCodeAt(0).toString(16).toUpperCase();return 2>r.length&&(r='0'+r),'%'+r});return a.decodeURIComponent(n)}if(a.XMLHttpRequest&&a.atob&&a.decodeURIComponent&&a.JSON&&a.location&&a.location.origin&&Object.defineProperty){try{b=a.JSON.parse(d(b))}catch(k){return}a.pcCachedResponses=b;var f=a.XMLHttpRequest.prototype.addEventListener;a.XMLHttpRequest.prototype.addEventListener=function(k){return this._precloudListeners||(this._precloudListeners={}),this._precloudListeners[k]=!0,f.apply(this,arguments)};var g=a.XMLHttpRequest.prototype.open;a.XMLHttpRequest.prototype.open=function(k,l){return this._precloudurl=l,this._precloudMethod=k,this._precloudurl=this._precloudurl.replace(new RegExp('^'+a.location.origin),''),g.apply(this,arguments)};var h=a.XMLHttpRequest.prototype.send;if(a.XMLHttpRequest.prototype.send=function(){if(this._precloudMethod&&!this._precloudMethod.match(/get/i))return h.apply(this,arguments);if(!b[this._precloudurl])return h.apply(this,arguments);var k=function k(){if(b[this._precloudurl]){var l=b[this._precloudurl][0],n=b[this._precloudurl][1];delete b[this._precloudurl];try{Object.defineProperty(this,'response',{get:function get(){return n}}),Object.defineProperty(this,'responseText',{get:function get(){return n}}),Object.defineProperty(this,'readyState',{get:function get(){return 4}}),Object.defineProperty(this,'status',{get:function get(){return 200}}),Object.defineProperty(this,'statusText',{get:function get(){return 200}}),Object.defineProperty(this,'getAllResponseHeaders',{value:function value(){return'content-type: '+l}}),Object.defineProperty(this,'getResponseHeader',{value:function value(u){if(u&&u.match(/content-type/i))return l}})}catch(u){if(u instanceof TypeError)return h.apply(this,arguments);throw u}var o=['readystatechange','load'];for(var q=0;q<o.length;q++){var r=o[q];if(this._precloudListeners&&this._precloudListeners[r]){var s=document.createEvent('Event');s.initEvent(r,!0,!0),this.dispatchEvent(s)}else{var t=this['on'+r];t&&t()}}}else return h.apply(this,arguments)};return k=k.apply.bind(k,this,arguments),a.requestAnimationFrame?a.requestAnimationFrame(k):setTimeout(k,0)},a.fetch){var j=a.fetch;a.fetch=function(k){var l=void 0;if(c(k))l=k;else{if(!(k&&k.url&&c(k.url)))return j.apply(this,arguments);if(l=k.url,k.method&&!k.method.match(/get/i))return j.apply(this,arguments)}if(l=l.replace(new RegExp('^'+a.location.origin),''),!b[l])return j.apply(this,arguments);var n=b[l][0],o=b[l][1];return delete b[l],Promise.resolve(new a.Response(o,{headers:{'Content-Type':n}}))}}}}
