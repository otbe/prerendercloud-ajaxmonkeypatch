"use strict";function ajaxMonkeyPatchForPreload(a,b){function c(k){return"string"==typeof k||k instanceof String}function d(k){var l=a.atob(k),n=l.replace(/(.)/g,function(o,q){var r=q.charCodeAt(0).toString(16).toUpperCase();return 2>r.length&&(r="0"+r),"%"+r});return a.decodeURIComponent(n)}if(a.XMLHttpRequest&&a.atob&&a.decodeURIComponent&&a.JSON&&a.location&&a.location.origin&&Object.defineProperty){try{b=a.JSON.parse(d(b))}catch(k){return}a.pcCachedResponses=b;var f=a.XMLHttpRequest.prototype.addEventListener;a.XMLHttpRequest.prototype.addEventListener=function(k){return this._precloudListeners||(this._precloudListeners={}),this._precloudListeners[k]=!0,f.apply(this,arguments)};var g=a.XMLHttpRequest.prototype.open;a.XMLHttpRequest.prototype.open=function(k,l){return this._precloudurl=l,this._precloudMethod=k,this._precloudurl=this._precloudurl.replace(new RegExp("^"+a.location.origin),""),!b[this._precloudurl]&&this._precloudurl.match(/^https/)&&this._precloudurl.match(/:443/)&&(this._precloudurl=this._precloudurl.replace(/:443/,"")),g.apply(this,arguments)};var h=a.XMLHttpRequest.prototype.send;if(a.XMLHttpRequest.prototype.send=function(){if(this._precloudMethod&&!this._precloudMethod.match(/get/i))return h.apply(this,arguments);if(!b[this._precloudurl])return h.apply(this,arguments);var k=function(){if(b[this._precloudurl]){var l=b[this._precloudurl][0],n=b[this._precloudurl][1];delete b[this._precloudurl];try{Object.defineProperty(this,"response",{get:function get(){return n}}),Object.defineProperty(this,"responseText",{get:function get(){return n}}),Object.defineProperty(this,"readyState",{get:function get(){return 4}}),Object.defineProperty(this,"status",{get:function get(){return 200}}),Object.defineProperty(this,"statusText",{get:function get(){return 200}}),Object.defineProperty(this,"getAllResponseHeaders",{value:function value(){return"content-type: "+l}}),Object.defineProperty(this,"getResponseHeader",{value:function value(u){if(u&&u.match(/content-type/i))return l}})}catch(u){if(u instanceof TypeError)return h.apply(this,arguments);throw u}for(var r,o=["readystatechange","load"],q=0;q<o.length;q++)if(r=o[q],this._precloudListeners&&this._precloudListeners[r]){var s=document.createEvent("Event");s.initEvent(r,!0,!0),this.dispatchEvent(s)}else{var t=this["on"+r];t&&t()}}else return h.apply(this,arguments)};return k=k.apply.bind(k,this,arguments),a.requestAnimationFrame?a.requestAnimationFrame(k):setTimeout(k,0)},a.fetch){var j=a.fetch;a.fetch=function(k){var n=void 0;if(c(k))n=k;else{if(!(k&&k.url&&c(k.url)))return j.apply(this,arguments);if(n=k.url,k.method&&!k.method.match(/get/i))return j.apply(this,arguments)}if(n=n.replace(new RegExp("^"+a.location.origin),""),!b[n])return j.apply(this,arguments);var o=b[n][0],q=b[n][1];return delete b[n],Promise.resolve(new a.Response(q,{headers:{"Content-Type":o}}))}}}}
